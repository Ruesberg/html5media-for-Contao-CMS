
(function(window,document,undefined){var VIDEO_TAG="video";var AUDIO_TAG="audio";if(!document.createElement(VIDEO_TAG).canPlayType){document.createElement(AUDIO_TAG);document.createElement("source");}
var isBrokenAndroid=window.navigator.userAgent.toLowerCase().match(/android 2\.[12]/)!==null;var isOpera=window.navigator.userAgent.toLowerCase().match(/opera/)!==null;function canPlayFormat(element,format){return element.canPlayType(format)||(isBrokenAndroid&&format.search("mp4")>-1);}
function scanElementsByTagName(tagName){var elements=document.getElementsByTagName(tagName);var elementsList=[];for(var n=0;n<elements.length;n++){elementsList.push(elements[n]);}
for(n=0;n<elementsList.length;n++){var element=elementsList[n];var requiresFallback=true;if(element.canPlayType){if(element.src){if(canPlayFormat(element,guessFormat(tagName,element.src))){requiresFallback=false;}}else{var sources=element.getElementsByTagName("source");for(var m=0;m<sources.length;m++){var source=sources[m];if(canPlayFormat(element,guessFormat(tagName,source.src,source.type))){requiresFallback=false;break;}}}}
if(requiresFallback||html5media.forceFallback(tagName,element)){html5media.createFallback(tagName,element);}else{if(isBrokenAndroid){element.addEventListener("click",function(){this.play();},false);}}}}
function html5media(){scanElementsByTagName("video");scanElementsByTagName("audio");}
html5media.forceFallback=function(tagName,element){return false;}
function dirname(path){return path.split("/").slice(0,-1).join("/")+"/";}
var scriptRoot=(function(){var scripts=document.getElementsByTagName("script");for(var n=0;n<scripts.length;n++){var script=scripts[n];if(script.src.match(/html5media(\.min|)\.js/)){return dirname(script.src);}}
return"";}());html5media.flowplayerSwf=scriptRoot+"flowplayer.swf";html5media.flowplayerAudioSwf=scriptRoot+"flowplayer.audio.swf";html5media.flowplayerControlsSwf=scriptRoot+"flowplayer.controls.swf";var THEORA_FORMAT='video/ogg; codecs="theora, vorbis"';var H264_FORMAT='video/mp4; codecs="avc1.42E01E, mp4a.40.2"';var VORBIS_FORMAT='audio/ogg; codecs="vorbis"';var WEBM_FORMAT='video/webm;';var M4A_FORMAT='audio/x-m4a;';var MP3_FORMAT='audio/mpeg;';var WAV_FORMAT='audio/wav; codecs="1"';var assumedFormats={video:H264_FORMAT,audio:MP3_FORMAT}
var fallbackFormats=[H264_FORMAT,M4A_FORMAT,MP3_FORMAT];var fileExtensions={video:{"ogg":THEORA_FORMAT,"ogv":THEORA_FORMAT,"avi":H264_FORMAT,"mp4":H264_FORMAT,"mkv":H264_FORMAT,"h264":H264_FORMAT,"264":H264_FORMAT,"avc":H264_FORMAT,"m4v":H264_FORMAT,"3gp":H264_FORMAT,"3gpp":H264_FORMAT,"3g2":H264_FORMAT,"mpg":H264_FORMAT,"mpeg":H264_FORMAT,"webm":WEBM_FORMAT},audio:{"ogg":VORBIS_FORMAT,"oga":VORBIS_FORMAT,"aac":M4A_FORMAT,"m4a":M4A_FORMAT,"mp3":MP3_FORMAT,"wav":WAV_FORMAT}}
function guessFormat(tag,src,type){return type||fileExtensions[tag][src.split(".").slice(-1)[0]]||assumedFormats[tag];}
function hasAttr(element,attr){var val=element.getAttribute(attr);return val==true||typeof val=="string";}
var hostUrl=window.location.protocol+"//"+window.location.host;var baseUrl=String(window.location);var baseUrl=dirname(function(){var elements=document.getElementsByTagName("base");for(var n=0;n<elements.length;n++){var element=elements[0];if(element.href){return element.href;}}
return String(window.location);}());function fixPath(url){if(url.substr(0,1)=="/"){return hostUrl+url;}
if(url.substr(0,1)=="."||!url.match(/^\s*\w+:\/\//)){return baseUrl+url;}
return url;}
function getDimension(element,dimension,fallback){var result=element.getAttribute(dimension);if(result){return result+"px";}
if(element.currentStyle){var style=element.currentStyle[dimension];}else if(window.getComputedStyle){var style=document.defaultView.getComputedStyle(element,null).getPropertyValue(dimension);}else{return fallback;}
if(style=="auto"){return fallback;}
return style;}
function getMimeType(format){return format.match(/\s*([\w-]+\/[\w-]+)(;|\s|$)/)[1];}
function formatMatches(format1,format2){return(getMimeType(format1)==getMimeType(format2));}
html5media.configureFlowplayer=function(element,config){return config;}
html5media.createFallback=function(tagName,element){var hasControls=hasAttr(element,"controls");var poster=element.getAttribute("poster")||"";var src=element.getAttribute("src")||"";if(!src){var sources=element.getElementsByTagName("source");for(var sn=0;sn<sources.length;sn++){var source=sources[sn];var srcValue=source.getAttribute("src");if(srcValue){for(var fn=0;fn<fallbackFormats.length;fn++){var fallbackFormat=fallbackFormats[fn];if(formatMatches(fallbackFormat,guessFormat(tagName,srcValue,source.getAttribute("type")))){src=srcValue;break;}}}
if(src){break;}}}
if(!src){return;}
var replacement=document.createElement("span");replacement.id=element.id;replacement.className=element.className;replacement.title=element.title;replacement.style.display="block";replacement.style.width=getDimension(element,"width","300px");if(tagName=="audio"){replacement.style.height="26px";}else{replacement.style.height=getDimension(element,"height","200px");}
element.parentNode.replaceChild(replacement,element);var preload=(element.getAttribute("preload")||"").toLowerCase();var playlist=[];if(poster){playlist.push({url:fixPath(poster)});}
if(src){playlist.push({url:fixPath(src),autoPlay:hasAttr(element,"autoplay"),autoBuffering:hasAttr(element,"autobuffer")||(hasAttr(element,"preload")&&(preload==""||preload=="auto")),onBeforeFinish:function(){return!hasAttr(element,"loop");}});}
var plugins={controls:hasControls&&{url:fixPath(html5media.flowplayerControlsSwf),opacity:0.8,backgroundColor:"#181818",backgroundGradient:"none",fullscreen:tagName==VIDEO_TAG,autoHide:tagName==VIDEO_TAG&&{fullscreenOnly:false,enabled:true,hideStyle:"fade",mouseOutDelay:0}||{enabled:false}}||null}
if(isOpera&&plugins.controls){plugins.controls.autoHide.enabled=false;}
if(tagName=="audio"){plugins["audio"]={url:fixPath(html5media.flowplayerAudioSwf)}
if(!hasControls){plugins["controls"]={url:fixPath(html5media.flowplayerControlsSwf),display:"none"}
replacement.style.height=0;}
playlist[playlist.length-1].autoBuffering=false;}
var config={play:null,playlist:playlist,clip:{scaling:"fit",fadeInSpeed:0,fadeOutSpeed:0},canvas:{backgroundGradient:"none",backgroundColor:"#000000"},plugins:plugins}
config=html5media.configureFlowplayer(element,config);flowplayer(replacement,{src:fixPath(html5media.flowplayerSwf),wmode:"opaque"},config);}
DomReady.ready(html5media);window.html5media=html5media;})(this,document);